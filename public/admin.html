<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin</title>
  <link rel="stylesheet" href="./style.css">
  <style>
    .admin-wrap{max-width:1220px;margin:20px auto;padding:16px;background:#fff;border:1px solid var(--border);border-radius:12px}
    .row{display:flex;gap:12px;align-items:center;margin-bottom:12px;flex-wrap:wrap}
    .col{flex:1}
    .field{width:100%;padding:8px 10px;border:1px solid var(--border);border-radius:8px}
    .btn{padding:8px 12px;border:1px solid var(--border);background:var(--bg-card);border-radius:8px;cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff;border-color:var(--accent)}
    .btn.danger{background:#e74c3c;color:#fff;border-color:#e74c3c}
    .btn.ghost{background:var(--bg-secondary)}
    .status{font-size:13px;color:var(--text-secondary)}
    .panel{padding:12px;border:1px solid var(--border);border-radius:10px;background:var(--bg-secondary)}
    .drop{padding:14px;border:2px dashed var(--border);border-radius:10px;text-align:center}
    .drop.drag{background:#f6f6f6}
    .queue{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px}
    .qitem{position:relative;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:#fff}
    .qitem img{width:100%;height:110px;object-fit:cover;display:block}
    .qitem .rm{position:absolute;top:6px;right:6px;background:#fff;border:1px solid var(--border);border-radius:6px;padding:2px 6px;cursor:pointer}
    .suggest{position:absolute;left:0;right:0;top:100%;background:#fff;border:1px solid var(--border);border-top:none;border-radius:0 0 8px 8px;max-height:240px;overflow:auto;z-index:5;display:none}
    .suggest.open{display:block}
    .suggest-item{padding:8px 10px;cursor:pointer}
    .suggest-item.hover{background:var(--bg-secondary)}
    .suggest-empty{padding:8px 10px;color:var(--text-secondary)}
    .cols{display:grid;grid-template-columns:1.3fr 1fr;gap:16px}
    .preview-wrap{padding:12px;border:1px solid var(--border);border-radius:12px;background:#fff}
    .changes{display:flex;flex-direction:column;gap:8px}
    .ch-item{display:flex;align-items:center;gap:8px;padding:8px;border:1px solid var(--border);border-radius:10px;background:#fff;cursor:pointer}
    .ch-badge{font-size:12px;padding:2px 8px;border-radius:999px;color:#fff}
    .b-add{background:#16a34a}.b-upd{background:#2563eb}.b-del{background:#ef4444}
    .filelist{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px}
    .filecard{display:flex;gap:10px;align-items:center;border:1px solid var(--border);border-radius:10px;background:#fff;padding:8px}
    .filecard img{width:54px;height:54px;object-fit:cover;border-radius:8px;border:1px solid var(--border)}
    .filecap{font-size:12px;color:var(--text-secondary)}
    @media (max-width:1024px){.cols{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="admin-wrap">
    <div class="row">
      <div class="col"><input id="token" class="field" placeholder="x-admin-token"></div>
      <div><button id="saveToken" class="btn">Зберегти токен</button></div>
      <div id="tokStatus" class="status"></div>
    </div>

    <div class="row">
      <div class="col" style="position:relative">
        <input id="productSearch" class="field" placeholder="Пошук товару">
        <div id="suggest" class="suggest"></div>
      </div>
    </div>

    <div class="cols">
      <div>
        <div class="panel">
          <div class="sec-title" style="margin-bottom:8px;font-weight:600">Змінити товар</div>
          <div class="row">
            <div class="col">
              <div><b id="prodName">—</b></div>
              <div class="status" id="prodCategory">—</div>
            </div>
            <div><input id="priceUAH" class="field" type="number" min="0" step="1" placeholder="Ціна, грн"></div>
            <div><button id="markDelete" class="btn danger">Позначити на видалення</button></div>
          </div>
          <div class="row">
            <textarea id="description" class="field" rows="3" placeholder="Опис"></textarea>
          </div>

          <div class="sec-title" style="margin-top:10px">Фото обраного товару</div>
          <div class="row">
            <div><input type="file" id="fileInput" multiple accept="image/*" class="btn"></div>
            <div id="uploadStatus" class="status"></div>
          </div>
          <div id="drop" class="drop">Перетягніть файли сюди</div>
          <div id="queueGrid" class="queue"></div>
        </div>

        <div class="panel" style="margin-top:16px">
          <div class="sec-title" style="margin-bottom:8px;font-weight:600">Новий товар</div>
          <div class="row">
            <div class="col"><input id="newName" class="field" placeholder="Назва"></div>
            <div class="col"><input id="newCategory" class="field" placeholder="Категорія"></div>
            <div><input id="newPrice" class="field" type="number" min="0" step="1" placeholder="Ціна, грн"></div>
          </div>
          <div class="row">
            <textarea id="newDesc" class="field" rows="2" placeholder="Опис (необов'язково)"></textarea>
          </div>
          <div class="row">
            <div><input type="file" id="newFileInput" multiple accept="image/*" class="btn"></div>
            <div><button id="createDraft" class="btn primary">Додати у список змін</button></div>
          </div>
          <div id="newDrop" class="drop">Перетягніть фото нового товару сюди</div>
          <div id="newQueueGrid" class="queue"></div>
        </div>
      </div>

      <div>
        <div class="panel">
          <div class="sec-title" style="margin-bottom:8px;font-weight:600">Перегляд картки</div>
          <div class="preview-wrap">
            <div id="cardPreview" class="products-grid" style="grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px"></div>
          </div>
        </div>

        <div class="panel" style="margin-top:16px">
          <div class="sec-title" style="margin-bottom:8px;font-weight:600">Список змін</div>
          <div id="changesList" class="changes"></div>
        </div>

        <div class="panel" style="margin-top:16px">
          <div class="sec-title" style="margin-bottom:8px;font-weight:600">Файли до завантаження</div>
          <div id="filesList" class="filelist"></div>
        </div>

        <div class="row" style="justify-content:flex-end;margin-top:18px">
          <button id="exitNoSave" class="btn ghost">Вийти без змін</button>
          <button id="applyAndExit" class="btn primary">Застосувати зміни і вийти</button>
        </div>
      </div>
    </div>
  </div>
  <script src="./admin.js"></script>
</body>
</html>
